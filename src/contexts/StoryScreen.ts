import Game from "../Game";
import { wordWrap } from "../utils";
import ScrollingTextScreen from "./base/ScrollingTextScreen";

const story = `STORY

A gentle rapping on the apartment door jarred Jacques from a deep slumber. Rolling to the floor with a profound thud, Jacques scurried to answer, unaware of his disheveled mane and drooping mug giving him the appearance of a saturated lion. The suited postal delivery worker bounced backward with a shock and a half-grimace at Jacques, but nevertheless handed him an envelope with an intricate ink seal before hurrying off down the rickety steel steps and vanishing down the the lane.

"Another lackluster commission offer, surely," Jacques sighed to himself. "How many times am I going to have to entertain this nonsense!"

Jacques' expression lifted from a droop to a sneer as he fumbled for the letter opener amidst a cluttered desk situated in the corner of the tiny apartment. Jacques turned the letter over in his hand before unsealing it, examining the ink seal and recognizing it as that of the wealthy and noble Hedge family crest. His heart began to race.

The Hedge family was known all over Lessonus. Anyone who's anyone had passed by the mansion at the edge of the city, with its beautiful gardens and golden gates. The Hedges were loaded, and everyone knew it. If there was ever going to be a big break, Jacques knew this was it.

"This could be the job I've been struggling to get. Gods, how long has it been now, waiting and waiting, day in and day out working for nothing. Everything that I could ever need--if anyone could make it happen, it'd be the Hedges!" Jacques exclaimed, nearly dropping the letter from his trembling mitts.

Jacques removed the letter from the envelope, its contents sprawling out as he unfurled the folded parchment.

"Dear Mr. Splintertooth,

I hope these times find you well. I, Fabienne Hedge, am writing you to commission your renowned services as an extraordinary expeditionist and inventor.

You may have heard tell of an object called the Wisher's Fragment during the course of your career. I have reason to believe this object actually exists, and lies deep within the cavernous ruins on our own front doorstep.

I am well aware of what I am asking of you, and of the dangers involved. Few have returned from those dangerous caves, and those that have return as different people than when they left. Your track record is immaculate, however, and I believe in your abilities to tackle this monumental and historic task.

Should you find yourself interested, please contact me as soon as you are able and we shall discuss a location to meet and plan.

Best regards,

Fabienne Hedge"

Jacques stood in stunned disbelief for a few moments before seating himself at the desk and scribbling out a response.

The days passed rapidly--soon a week and, finally, a month--when a letter arrived that declared a meeting point. The two were to convene at the Sprouting Dandelion, a small but ritzy restaurant situated not far from Jacques' home and nestled within the bustling shopping district.

Jacques dressed in his best suit and tie, admiring himself in the mirror as much as he could. He knew he wasn't much for looks, but he always thought he looked quite nice in fancy attire, and he rarely got the chance to wear much more than dusty rags and heavy explorer's gear these days.

Heading down past the apartment parking and to the curb, Jacques hailed a cab.

"Where to?" said the woman at the wheel.

"The Sprouting Dandelion, today is--" Jacques hesitated. The looming dread of another dangerous expedition ate at him, despite the excitement he felt and the immense opportunity that laid before him. "Today is probably the biggest day of my life."

Jacques settled into the back of the cab. He watched the familiar sights pass him by in a blur as the cab wove in and out of mid-day traffic. Memories of simpler times, when life was easier to live and responsibility didn't gnaw at every fiber of his being, enveloped him.

He remembered long walks late at night and gazing at stars in the grass of the empty park, in the times before industry took over and the skies became choked with black fog and bright lights. His best friend had been by his side, then, as they'd invent shapes in the spaces between the dots.

Jacques shook himself from memory and into the present, pulling from his pocket a watch and running his finger across it. He frowned as he opened it, staring at the picture inside as feelings of all kinds poured into him. Jacques felt like he was about to burst, breathing heavily and slipping once more to times past.

"Okay-"

"Yes, it's going to be okay! I'll be okay, we'll be okay! Everything. Will. Be. Okay! Just trust me, please! This is the last time and I know it's going to pay off soon!" said Jacques, exhausted.

"I just need you to lay off of me for one Gods damned minute, that's all I'm asking, let me do this one last thing and we'll never have to worry about this again!" Jacques shouted as he slammed the door behind him. He could hear crying coming from inside and knew he had made a mistake, but that didn't stop him. Jacques knew he was right despite it all, he knew this was his big break, that if he could just pull this off then everything was going to be--

"Are you okay? Sir, we're here," spoke the cab driver, she looked quite unnerved by Jacques.

"Closed the wrong door-" Jacques whispered to himself, shaking his head and returning to reality. "Getting lost in a memory at a time like this," he thought. "Foolish. I just need to focus on what's in front of me. Everything will fix itself bit by bit after that."

"Oh, uh-" Jacques reached into his pocket, pulling out an odd contraption of his own making. He pushed a small button on the side, and the little device lit up and popped out currency. "Here, there's a bit extra for any trouble I might've caused."

The cab driver nodded and left as Jacques gazed up at the restaurant sign, admiring the craftsmanship. Each letter was white and fluffy, like a dandelion whose pappus have spread half to the wind. Jacques felt a pang of dread as he stared at it, something tugging at the back of his mind. He didn't like the uncertainty that came with thinking about those dandelion seeds spreading. The thought of being uplifted and uprooted, carried against your will somewhere and having to plant your roots in an unknown place, filled him with a familiar fear he couldn't quite explain.

"Shake it off, Jacques," he muttered to himself as his feet carried him through the ornate double doors.

Upon entering, Jacques was greeted by one of the waiters and ushered to a seat at the center of the dining area, directly across from a woman who he assumed was Fabienne Hedge.  Her long ivory hair complimented her piercing gaze and she was elegantly garbed in a stylish velvet Lessonese blouse. Her presence commanded the entire atmosphere of the restaurant as she stared across the table, nose upturned and sizing up the unkempt, yet well suited man before her.

It was Fabienne Hedge all right, the youngest daughter of the Hedge family. Not too many people knew much about her: she largely kept from the public eye while her sister stole the spotlight with garish parties and a luxurious lifestyle. It was always "Adeline" this and "Adeline" that around town. Jacques couldn't help but wonder to himself if that simply rubbed Fabienne the wrong way.

Jacques seated himself, wondering if he should say anything. He never much liked starting conversations, preferring to listen and gain a grasp on the people around him, and in this situation he wasn't sure what was expected of him. He took a moment, then cleared his throat and opened his mouth--

"I can't say you match how people have described you," Fabienne said coolly, leaning slightly forward to rest her folded hands on the table.

"I can't say I match how I describe myself either, to be frank," Jacques replied, grinning and twirling his bushy mustache in a nervous fashion.

A long silence sat, the relaxing atmosphere of the restaurant creeping in until Fabienne shifted the awkward and stilted conversation to the expedition.

Jacques felt those tinges of fear and anxiety creep back, he had to speak his mind truthfully. "First of all, before you begin, Miss Hedge--"

"Fabienne," she interrupted, "just call me Fabienne."

"Right, Fabienne," Jacques began. "Before you begin, you must know how many times I've been tipped about this Wisher's Fragment and how many times it's been rumor, hoax or outright lies."

Fabienne's expression remained unflinching. Jacques had no idea how to read someone like her, if she did not care or if she was simply all business. For a moment, he felt small and sank into his chair, the air around him growing hotter as his heart throbbed in his throat. Jacques knew he couldn't mess this opportunity up, and already he was questioning his client and himself.

Fabienne allowed the room to grow quiet, tension forming fully again before replying. "Of course, Jacques. Believe me or not about the Wisher's Fragment. This is your choice. However, the fact you're sitting across this table from me right now leads me to believe you've already made a decision."

Jacques pondered for a moment, his mind racing at the thought of what he could finally do if this expedition was successful. All the money in the world, no more worries about the little problems in life, all those closed doors in his past that could be re-opened.

"Hm. I believe I have?" Jacques spoke, with tepid confidence. His hand twitched a little before again fiddling nervously with his mustache. Was it worth risking life, limb and what little he had left for something that might not be real?

"Of course it is," Jacques thought to himself. After all, this was his only chance to set things right in his life.

Fabienne cocked an eyebrow at the response. "Your face and mannerisms say anything but, Jacques. Do better than this, convince me. Are you or are you not going to retrieve the Wisher's Fragment?"

"If it truly exists, if there is even a chance, I have to take it. You must understand my hesitations aren't from a lack of confidence in my abilities, but a lack of evidence." Jacques paused for a moment before finishing his thought. "What I mean to say, Fabienne, is that if something like this does exist, then why is there a lack of anything beyond rumor and speculation?"

Fabienne's brow furrowed as she gave a tired half shrug. "Hell if I know," she sighed, "but that is why you are here, is it not?" For the first time that night, her gaze wandered to the side as she fell lost into her own thoughts. In that moment Jacques could finally read her, and he could see clearly that whatever this Wisher's Fragment actually was, it was extremely important that she have it.

"Maybe she has her own problems to sort," Jacques' internal monologue started. "You aren't the only person on this planet with problems, mistakes to sort, rights to wrong. Just look at her. You could help her as much as you're helping yourself."

Jacques closes his eyes, breathing in deeply and leaning back. "Yes, that is why I'm here." A resolve crept into his voice. "I'll get you what you want, and in return, what is it that I'll receive as compensation?"

"Is the money not enough, Jacques?" said Fabienne, shooting a look of indignation directly at him.

"No, it's quite enough, make no mistake," Jacques leaned back and folded his arms before finishing his thought. "But can you promise me that if I don't return, that there is something you'll do for me?"

"You're being stupid," said a voice in Jacques' head. It wasn't his own, sounding muffled like it was coming from behind a thick wall. "Tell her if you want. It won't make a difference."

"Well, Jacques, that depends on the magnitude of the request." Fabienne was clearly not amused, but she sensed something was amiss with Jacques, and gave him the benefit of the doubt.

From his pocket, he pulled out a letter crumpled into a ball, rolling it across the table. "Could you get this to the address listed? Oh, and-" he hesitated, drawing a deep breath before continuing, "could you do it discreetly? I'd do it myself, but..."

"But?" Fabienne was curious, watching this odd man flit from one mood to the next.

"Never mind. Regardless of what happens, I'll take the job." Jacques dodged the subject. He wasn't ready to talk about it. He was unsure if he'd ever be ready to talk about it. "We should order something, to celebrate!"

"...I suppose we should." Fabienne let the subject drop. "I'll take care of... whatever this is, if you don't come back." She said, holding the crumpled paper ball with vague curiosity.

Jacques felt some level of relief wash over him. He let himself relax for the first time since entering the restaurant as Fabienne waved a waiter over to take their orders.

"I'll have the Shockworm eel, and can I pair it with a vintage Deliceur White?" Fabienne folded her menu and passed it to the waiter.

"For you, sir?" the waiter asked, scribbling down Fabienne's order.

It occurred to Jacques he hadn't even looked the menu over the entire time he'd been there. His nerves had gotten the better of him, but a light meal with a drink sounded nice.

"Bottle of Clownsauce, and I'd like to wait a minute to figure out the rest of my order." Jacques managed to squeak out. Both Fabienne and the waiter stared, dumbstruck that anyone would order Clownsauce in an establishment like this. Yet the waiter jotted it down, nodded and made his way to put their order request in.

A few minutes later, he returned with their drinks and Jacques placed his order for some greenloaf baguettes, he reasoned with himself that this is probably the most expensive bread he had ever bought, but the cheapest item he could find on the menu.

Fabienne looked at her fancy bottle with the ornate plant pattern paired next to the crude bottle with the drunken half-laughing, half-crying clown and burst out laughing. It took a moment for Jacques to catch on, but when he did, he couldn't help but laugh too. The two couldn't be more different from each other, yet here they were in the same room about to work together to, hopefully, make something historic happen.

"Hell of a pair!" Fabienne said, wiping the tears of laughter from her eyes. She poured herself a glass of Deliceur White, and Jacques popped the twist top off his bottle of Clownsauce. They both raised their respective drinks and clinked them together.

"To a successful expedition!" Fabienne exclaimed.

"To a..." Jacques struggled to find something worth toasting. "To a better future!" he finally managed.

The two became fast friends, despite everything. Jacques learned that Fabienne, while quite cool and collected, thoroughly enjoyed the rough and tumble of getting her hands dirty with field work. She hoped that someday she could use some of her funds to help people less fortunate in the world through medicine and scientific breakthroughs, despite the rest of her family being obsessed with image and legacy.

Jacques' love for inventing and exploring also came out as he discussed his many ideas for technological innovations, hoping someday he could create automatons or piloted tools for explorers and expeditionists like himself to safely discover history and gather resources--things that'd let people live more comfortable lives, and things that'd let field workers and laborers spend more time with their families.

The two shook hands as their conversation drew to a close. "Stay safe out there, alright Jacques?"

"We'll see," Jacques said, his eyes not fully meeting Fabienne's. Despite the great dinner and a new potential friend, Jacques knew the danger he was taking on by spelunking in that specific region of Lessonus. He'd only been there once before to scout and had nearly been bitten by a canandra, got knocked off a small cliff by a buster, and managed to narrowly avoid bleeding out after a nasty fall into a pit trap placed by poregons.

This wasn't going to be easy.

One week later, at the break of day, Jacques began his journey through the thickets and far beyond the charted trails to reach his destination. The gaping maw of the cavern entrance threatened to engulf him. He steeled his resolve, setting foot into the deep veins of the planet and delving the ancient ruins of Lessonus' past in search of the elusive Wisher's Fragment...`;

export default class StoryScreen extends ScrollingTextScreen {
  constructor(g: Game) {
    super(g, "StoryScreen", wordWrap(story, g.charsWidth - 2));
  }
}
